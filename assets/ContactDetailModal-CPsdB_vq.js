import{c,r as p,j as e,i as S,X as N,d as g,k as M,l as E,P as _,m as P}from"./index-wPr_h-RI.js";import{U as I,M as w}from"./user-Lo0YfxfJ.js";import{F as y}from"./file-text-qAcltmMb.js";const A=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],K=c("building-2",A);const L=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],k=c("calendar",L);const V=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],F=c("pen",V);const z=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],H=c("tag",z);function $({contact:s,onClose:d,onSave:x}){const[i,r]=p.useState(!1),[l,a]=p.useState(null);if(p.useEffect(()=>{s&&(a({...s}),r(!1))},[s]),!s||!l)return null;const j=()=>{x(l),r(!1)},h=s.phones.split(`
`).filter(t=>t.trim()),v=s.users.split(`
`).filter(t=>t.trim()),m=s.operators.split(`
`).filter(t=>t.trim()),u=s.notes?s.notes.split(`

`).filter(t=>t.trim()):[];return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[90] flex items-center justify-center p-4",onClick:d,children:e.jsxs("div",{className:"glass rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl animate-in fade-in zoom-in-95 duration-200 flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex-1",children:[i?e.jsx("input",{value:l.name,onChange:t=>a({...l,name:t.target.value}),className:"text-3xl font-bold bg-white/10 border border-white/20 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-white/30"}):e.jsx("h2",{className:"text-3xl font-bold",children:s.name}),i?e.jsx("input",{value:l.org,onChange:t=>a({...l,org:t.target.value}),className:"text-lg text-white/70 bg-white/10 border border-white/20 rounded-lg px-4 py-2 w-full mt-2 focus:outline-none focus:ring-2 focus:ring-white/30"}):e.jsx("p",{className:"text-lg text-white/70 mt-1",children:s.org})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:i?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"p-2 rounded-lg bg-green-500/20 hover:bg-green-500/30 transition-colors",title:"Spara",children:e.jsx(S,{className:"w-5 h-5 text-green-400"})}),e.jsx("button",{onClick:()=>{a({...s}),r(!1)},className:"p-2 rounded-lg glass-hover transition-colors",title:"Avbryt",children:e.jsx(N,{className:"w-5 h-5"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(!0),className:"p-2 rounded-lg glass-hover transition-colors",title:"Redigera",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx("button",{onClick:d,className:"p-2 rounded-lg glass-hover transition-colors",title:"Stäng",children:e.jsx(N,{className:"w-5 h-5"})})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-5",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Kontaktinformation"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{icon:I,label:"Kontaktperson",value:s.contact||"-",editValue:l.contact,isEditing:i,onChange:t=>a({...l,contact:t})}),e.jsx(o,{icon:H,label:"Roll",value:s.role||"-",editValue:l.role,isEditing:i,onChange:t=>a({...l,role:t})}),e.jsx(o,{icon:w,label:"Adress",value:s.address||"-",editValue:l.address,isEditing:i,onChange:t=>a({...l,address:t})}),e.jsx(o,{icon:w,label:"Ort",value:s.city||"-",editValue:l.city,isEditing:i,onChange:t=>a({...l,city:t})}),e.jsx(o,{icon:k,label:"Skapad",value:new Date(s.createdAt).toLocaleString("sv-SE"),isEditing:!1})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-5",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Status & Prioritet"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/60 uppercase tracking-wide mb-2 block",children:"Status"}),i?e.jsxs("select",{value:l.status,onChange:t=>a({...l,status:t.target.value}),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-white/30",children:[e.jsx("option",{value:"new",children:"Ny"}),e.jsx("option",{value:"contacted",children:"Kontaktad"}),e.jsx("option",{value:"interested",children:"Intresserad"}),e.jsx("option",{value:"not_interested",children:"Ej intresserad"}),e.jsx("option",{value:"converted",children:"Konverterad"})]}):e.jsxs("span",{className:g("inline-block px-3 py-1.5 rounded-full text-sm font-semibold",M(s.status)),children:[s.status==="new"&&"Ny",s.status==="contacted"&&"Kontaktad",s.status==="interested"&&"Intresserad",s.status==="not_interested"&&"Ej intresserad",s.status==="converted"&&"Konverterad"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/60 uppercase tracking-wide mb-2 block",children:"Prioritet"}),i?e.jsxs("select",{value:l.priority,onChange:t=>a({...l,priority:t.target.value}),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-white/30",children:[e.jsx("option",{value:"low",children:"Låg"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"Hög"})]}):e.jsxs("span",{className:g("inline-block text-sm font-semibold",E(s.priority)),children:[s.priority==="low"&&"Låg",s.priority==="medium"&&"Medium",s.priority==="high"&&"Hög"]})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-5",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Telefonnummer (",h.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[h.map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-mono text-sm",children:t.replace(/[\s-]/g,"")}),v[n]&&e.jsx("div",{className:"text-xs text-white/60 mt-1",children:v[n]})]}),m[n]&&e.jsx("div",{className:g("text-xs font-semibold",P(m[n])),children:m[n]})]},n)),h.length===0&&e.jsx("p",{className:"text-white/40 text-sm text-center py-4",children:"Inga telefonnummer"})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-2xl p-5",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Samtalshistorik (",u.length,")"]}),e.jsxs("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:[u.map((t,n)=>{const f=t.split(`
`),b=f[0].match(/\[(.*?)\]/)?.[1]||"",C=f.slice(1).join(`
`);return e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[b&&e.jsxs("div",{className:"text-xs text-white/50 mb-2 flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),b]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:C})]},n)}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"w-12 h-12 text-white/20 mx-auto mb-3"}),e.jsx("p",{className:"text-white/40 text-sm",children:"Ingen samtalshistorik ännu"})]})]})]})})]})}),e.jsxs("div",{className:"border-t border-white/10 p-4 flex items-center justify-between text-xs text-white/60",children:[e.jsxs("div",{children:["Senast uppdaterad: ",new Date(s.updatedAt).toLocaleString("sv-SE")]}),i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{a({...s}),r(!1)},className:"px-4 py-2 rounded-lg glass-hover",children:"Avbryt"}),e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 font-semibold",children:"Spara ändringar"})]})]})]})})}function o({icon:s,label:d,value:x,editValue:i,isEditing:r,onChange:l}){return e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-white/60 uppercase tracking-wide mb-1 flex items-center gap-1",children:[e.jsx(s,{className:"w-3 h-3"}),d]}),r&&l?e.jsx("input",{value:i||"",onChange:a=>l(a.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-white/30"}):e.jsx("p",{className:"text-sm",children:x})]})}export{$ as ContactDetailModal};
